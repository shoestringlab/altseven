export var a7=a7;(a7=function(){"use strict";return{init:function(e,t,n){var o,i,r;e.model=void 0!==e.model?e.model:"altseven",""===e.model&&n("A model is required, but no model was specified.");var a={auth:{sessionTimeout:e.auth&&e.auth.sessionTimeout?e.auth.sessionTimeout:9e5},console:e.console?{enabled:e.console.enabled||!1,wsServer:e.console.wsServer||"",container:e.console.container||("object"==typeof gadgetui?gadgetui.display.FloatingPane:""),top:e.console.top||100,left:e.console.left||500,width:e.console.width||500,height:e.console.height||300}:{},logging:{logLevel:e.logging&&e.logging.logLevel?e.logging.logLevel:"ERROR,FATAL,INFO",toBrowserConsole:!(!e.logging||!e.logging.toBrowserConsole)&&e.logging.toBrowserConsole},model:e.model,remote:e.remote?{loginURL:e.remote.loginURL||"",logoutURL:e.remote.logoutURL||"",refreshURL:e.remote.refreshURL||"",useTokens:!e.auth||!e.auth.useTokens||e.auth.useTokens}:{useTokens:!0},router:e.router?{options:{useEvents:e.router.useEvents||!0},routes:e.router.routes||void 0}:void 0,ui:{renderer:e.ui?e.ui.renderer||("object"==typeof Mustache?"Mustache":"object"==typeof Handlebars?"Handlebars":"templateLiterals"):"templateLiterals",timeout:e.ui&&e.ui.timeout?e.ui.timeout:6e5},ready:!1,user:""};(o=new Promise(function(e,t){a7.log.trace("a7 - model init"),a7.model.init(a,e,t)})).then(function(){a7.model.set("a7",a)}).then(function(){(i=new Promise(function(e,t){a7.model.get("a7").console.enabled?(a7.log.trace("a7 - console init"),a7.console.init(a,e,t)):e()})).then(function(){a7.log.trace("a7 - log init"),a7.log.init(),a7.log.trace("a7 - security init"),a7.security.init(e.security&&e.security.options?e.security.options:{}),a7.log.trace("a7 - remote init"),a7.remote.init(e.remote&&e.remote.modules?e.remote.modules:{}),a7.log.trace("a7 - events init"),a7.events.init(),a.router&&(a7.log.trace("a7 - router init"),a7.router.init(a.router.options,a.router.routes)),new Promise(function(e,t){a7.log.trace("a7 - layout init"),a7.ui.init(e,t)}).then(function(){(r=new Promise(function(e,t){a7.log.trace("a7 - isSecured"),a7.security.isAuthenticated(e,t)})).then(function(e){a7.error.init(),a7.log.info("Authenticated: "+e+"..."),a7.log.info("Init complete..."),t({secure:e})}),r.catch(function(e){a7.log.error(e),n()})})}),i.catch(function(e){a7.log.error(e),n()})}),o.catch(function(e){a7.log.error(e),n()})}}}()).console=function(){"use strict";var e,t=function(t,n,o,i){var r=document.createElement("div");r.setAttribute("class","a7-console-row-"+o),void 0!==i&&(r.innerHTML=i+": ",r.setAttribute("class",r.getAttribute("class")+" a7-console-row-"+i)),r.innerHTML+=+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+": "+t,e.appendChild(r)},n=function(e,n){var o=0;if("history"===n.type)for(o=0;o<n.data.length;o++)t(n.data[o].text,new Date(n.data[o].time),"websocket");else"message"===n.type?t(n.data.text,new Date(n.data.time),"websocket"):a7.log.error("This doesn't look like valid JSON: ",n)};return{init:function(o,i,r){var a=o.console;if(""===a.container&&r("You must specify a container object for the console display."),a.enabled){if(!0,(e=document.createElement("div")).setAttribute("id","consoleDiv"),e.setAttribute("class","a7-console"),document.body.append(e),a7.components.Constructor(a.container,[e,{width:a.width,left:a.left,height:a.height,title:"Console Window",top:a.top,enableShrink:!1,enableClose:!0}],!1).selector.setAttribute("right",0),a.wsServer)a7.remote.webSocket(a.wsServer,n);a7.console.addMessage=t,a7.log.info("Console initializing..."),i()}else r("Console init should not be called when console option is set to false.")}}}(),a7.error=function(){"use strict";var e={};return window.onerror=function(e,t,n,o,i){return a7.error.captureError(e,t,n,o,i),!1},{events:{scriptError:[]},capture:function(){},captureError:function(e,t,n,o,i){if(e.toLowerCase().indexOf("script error")>-1)a7.log.error("Script Error: See Browser Console for Detail");else{var r=["Message: "+e,"URL: "+t,"Line: "+n,"Column: "+o,"Error object: "+JSON.stringify(i)].join(" - ");a7.error.fireEvent("scriptError",[e,t,n,o,i]),a7.log.error(r)}},init:function(){a7.components.EventBindings.getAll().forEach(function(t){void 0===e[t]&&(e[t.name]=t.func),a7.error.on=e.on,a7.error.off=e.off,a7.error.fireEvent=e.fireEvent})}}}(),a7.events=function(){"use strict";var e={},t=e.hasOwnProperty;return{subscribe:function(n,o){t.call(e,n)||(e[n]=[]);var i=e[n].push(o)-1;return{remove:function(){delete e[n][i]}}},init:function(){a7.events.subscribe("auth.login",function(e){a7.remote.invoke("auth.login",e)}),a7.events.subscribe("auth.logout",function(e){a7.remote.invoke("auth.logout",e)}),a7.events.subscribe("auth.refresh",function(e){a7.remote.invoke("auth.refresh",e)}),a7.events.subscribe("auth.sessionTimeout",function(){a7.security.invalidateSession()}),a7.events.subscribe("auth.invalidateSession",function(){a7.security.invalidateSession()})},publish:function(n,o){a7.log.trace("event: "+n),t.call(e,n)&&e[n].forEach(function(e){e(o||{})})}}}(),a7.log=function(){var e=!1,t=!1,n=!1,o=[],i="ERROR,FATAL,INFO",r=function(r,a){e&&i.indexOf(a)>=0||i.indexOf("ALL")>=0?(n&&a7.console.addMessage(r,new Date,"local",a),t&&console.log(r)):e||o.push({message:r,level:a})};return{init:function(){i=a7.model.get("a7").logging.logLevel,t=a7.model.get("a7").logging.toBrowserConsole,n=a7.model.get("a7").console.enabled,e=!0,o.forEach(function(e){r(e.message,e.level)}),a7.log.info("Log initializing...")},error:function(e){r(e,"ERROR")},fatal:function(e){r(e,"FATAL")},info:function(e){r(e,"INFO")},trace:function(e){r(e,"TRACE")},warn:function(e){r(e,"WARN")}}}(),a7.model=function(){"use strict";var e,t={};return{destroy:function(){return t.destroy.apply(e,arguments)},get:function(){return t.get.apply(e,arguments)},set:function(){return t.set.apply(e,arguments)},exists:function(){return t.exists.apply(e,arguments)},init:function(n,o){if(a7.log.info("Model initializing... "),"string"==typeof n.model)switch(n.model){case"altseven":(e=a7.components.Model).init(n);break;case"gadgetui":e=gadgetui.model}else"object"==typeof n.model&&(e=n.model);a7.log.trace("Model set: "+e),Object.keys(e).forEach(function(n){t[n]=e[n]}),o()}}}(),a7.components=function(){"use strict";var e={on:function(e,t){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this},off:function(e){return this.events[e]=[],this},fireEvent:function(e,t){var n=this;void 0!==this.events[e]&&this.events[e].forEach(function(e){e(n,t)})},getAll:function(){return[{name:"on",func:this.on},{name:"off",func:this.off},{name:"fireEvent",func:this.fireEvent}]}},t=function(){var e={},t=[],n=20,o=0;function i(e,t){this.data=e,this.elements=[],void 0!==t&&this.bind(t)}i.prototype.handleEvent=function(e){var t,n;switch(e.type){case"change":for(t=0;t<this.elements.length;t++)n=this.elements[t],void 0===e.originalSource&&(e.originalSource="BindableObject.handleEvent['change']"),e.target.name===n.prop&&"BindableObject.updateDomElement"!==e.originalSource&&(e.target.type.match(/select/)?this.change({id:e.target.value,text:e.target.options[e.target.selectedIndex].innerHTML},e,n.prop):this.change(e.target.value,e,n.prop))}},i.prototype.change=function(e,t,n){var o,i;if(void 0===t.originalSource&&(t.originalSource="BindableObject.change"),console.log("change : Source: "+t.originalSource),void 0===n)this.data=e;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";if(void 0===this.data[n])throw"Property '"+n+"' of object is undefined.";this.data[n]=e}for(o=0;o<this.elements.length;o++)i=this.elements[o],void 0!==n&&n!==i.prop||void 0===t.target||i.elem==t.target||this.updateDomElement(t,i.elem,e)},i.prototype.updateDom=function(e,t,n){var o,i,r;for(void 0===e.originalSource&&(e.originalSource="BindableObject.updateDom"),o=0;o<this.elements.length;o++)if(i=this.elements[o],void 0===n)if("object"==typeof t)for(r in t)this.elements[o].prop===r&&this.updateDomElement(e,i.elem,t[r]);else this.updateDomElement(e,i.elem,t);else i.prop===n&&this.updateDomElement(e,i.elem,t)},i.prototype.updateDomElement=function(e,t,n){var o=function(){switch(t.tagName){case"SELECT":for(;t.firstChild;)t.removeChild(t.firstChild);n.forEach(function(e){var n=document.createElement("option");"object"==typeof e?(n.value=e.id,n.text=e.text):n.text=e,t.appendChild(n),0});break;case"UL":case"OL":for(;t.firstChild;)t.removeChild(t.firstChild);n.forEach(function(e){var n=document.createElement("li");n.textContent=e,t.appendChild(n)})}};if(void 0===e.originalSource&&(e.originalSource="BindableObject.updateDomElement"),"object"==typeof n?"INPUT".indexOf(t.tagName)>=0?t.value=n.id:"OL,UL,SELECT".indexOf(t.tagName)>=0?o():t.textContent=n.text:"INPUT".indexOf(t.tagName)>=0?t.value=n:"OL,UL,SELECT".indexOf(t.tagName)>=0?o():t.textContent=n,"model.set"!==e.originalSource){var i=new Event("change");i.originalSource="model.updateDomElement",t.dispatchEvent(i)}},i.prototype.bind=function(e,t){var n,o=this;void 0===t?(e.value=this.data,n={elem:e,prop:""}):(e.value=this.data[t],n={elem:e,prop:t}),e.addEventListener?e.addEventListener("change",this,!1):e.attachEvent("onpropertychange",function(e){if("value"===e.propertyName){var t=e.srcElement,n="SELECT"===t.nodeName?{id:t.value,text:t.options[t.selectedIndex].innerHTML}:t.value;o.change(n,{target:t},t.name)}}),this.elements.push(n)};var r=function(e){return JSON.parse(JSON.stringify(t[e]))},a=function(){a7.log.trace("Set memento"),o<t.length-1&&(t=t.slice(0,o)),t.length===n&&(a7.log.trace("model - moving an item off the stack history."),t.shift()),t.push(JSON.parse(JSON.stringify(e))),o=t.length-1},s=function(e){o=e<0?0:e>t.length-1?t.length-1:e};return{undo:function(t){!function(e){e=void 0!==e?e:1,a7.log.trace("Move back in history index by "+e+" operations "),s(o-e)}(t),e=r(o)},redo:function(t){!function(e){e=void 0!==e?e:1,a7.log.trace("Move forward in history index by "+e+" operations "),s(o+e)}(t),e=r(o)},init:function(e){n=void 0!==e&&void 0!==e.maxEntries?e.maxEntries:20},destroy:function(t){a(),delete e[t]},exists:function(t){return n=t,e.hasOwnProperty(n);var n},get:function(t){if(void 0!==e[t])try{return e[t].constructor===Map?new Map(e[t]):JSON.parse(JSON.stringify(e[t]))}catch(e){throw a7.log.error(e),e}},set:function(t,n){!function(t,n){switch(a7.log.trace("Set key: "+t+" = "+JSON.stringify(n)),typeof n){case"undefined":case"number":case"boolean":case"function":case"Symbol":case"string":e[t]=n;break;case"object":null===n?e[t]=null:n.constructor===Map?e[t]=new Map(n):e[t]=JSON.parse(JSON.stringify(n))}a()}(t,n)}}}();function n(e){return Object.assign(this,e),this}function o(e){this.renderer=a7.model.get("a7").ui.renderer,this.type="View",this.timeout,this.timer,this.element,this.props=e,this.isTransient=e.isTransient||!1,this.state={},this.skipRender=!1,this.children={},this.components={},this.config(),this.fireEvent("mustRegister")}return n.prototype.getMemento=function(){var e={},t=this;return Object.keys(this).forEach(function(n){e[n]=t[n]}),e},o.prototype={config:function(){this.on("mustRegister",function(){a7.log.trace("mustRegister: "+this.props.id),a7.ui.register(this),a7.ui.getView(this.props.parentID)&&a7.ui.getView(this.props.parentID).addChild(this)}.bind(this)),this.on("mustRender",function(){a7.log.trace("mustRender: "+this.props.id),this.shouldRender()?a7.ui.enqueueForRender(this.props.id):(a7.log.trace("Render cancelled: "+this.props.id),this.skipRender=!1)}.bind(this)),this.on("rendered",function(){this.isTransient&&(void 0!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.checkRenderStatus.bind(this),a7.model.get("a7").ui.timeout)),this.onRendered()}.bind(this)),this.on("registered",function(){(void 0===this.props.parentID||this.mustRender)&&this.fireEvent("mustRender")}.bind(this)),this.on("mustUnregister",function(){a7.ui.unregister(this.props.id)}.bind(this))},events:["mustRender","rendered","mustRegister","registered","mustUnregister"],setState:function(e){this.state=Object.assign(e),this.fireEvent("mustRender")},getState:function(){return Object.assign(this.state)},addChild:function(e){this.children[e.props.id]=e},removeChild:function(e){delete this.children[e.props.id]},clearChildren:function(){this.children={}},getParent:function(){return this.props.parentID?a7.ui.getView(this.props.parentID):void 0},render:function(){if(a7.log.info("render: "+this.props.id),void 0!==this.element&&null!==this.element||(this.element=document.querySelector(this.props.selector)),!this.element)return a7.log.error("The DOM element for view "+this.props.id+" was not found. The view will be removed and unregistered."),void 0!==this.props.parentID&&a7.ui.getView(this.props.parentID).removeChild(this),void this.fireEvent("mustUnregister");this.element.innerHTML="function"==typeof this.template?this.template():this.template;var e=[];a7.ui.getEvents().forEach(function(t){e.push("[data-on"+t+"]")}),this.element.querySelectorAll(e.toString()).forEach(function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t];if(n.name.startsWith("data-on")){var o=n.name.substring(7,n.name.length);e.addEventListener(o,this.eventHandlers[e.attributes["data-on"+o].value])}}}.bind(this)),this.fireEvent("rendered")},shouldRender:function(){return!this.skipRender},onRendered:function(){for(var e in this.children)this.children[e].element=document.querySelector(this.children[e].props.selector),this.children[e].render()},checkRenderStatus:function(){null===document.querySelector(this.props.selector)?a7.ui.unregister(this.id):this.isTransient&&(this.timer=setTimeout(this.checkRenderStatus.bind(this),a7.model.get("a7").ui.timeout))}},{Constructor:function(t,n,o){var i,r;return!0===o&&e.getAll().forEach(function(e){void 0===t.prototype[e]&&(t.prototype[e.name]=e.func)}),r=Object.create(t.prototype),!0===o&&(r.events={},void 0!==t.prototype.events&&t.prototype.events.forEach(function(e){r.events[e]=[]})),void 0===(i=t.apply(r,n))&&(i=r),i},EventBindings:e,Model:t,User:n,View:o}}(),a7.remote=function(){var e,t,n={},o=new Date,i={},r=function(e,t){i[e]=t},a=function(){new Promise(function(e,t){a7.remote.invoke("auth.refresh",{resolve:e,reject:t})}).then(function(e){a7.log.trace("Still logged in.")}).catch(function(e){a7.events.publish("auth.sessionTimeout")})},s=function(t){sessionStorage.token=t,e=t};return{webSocket:function(e,t,n){if(e){if(window.WebSocket=window.WebSocket||window.MozWebSocket,!window.WebSocket)return void a7.log.error("Your browser doesn't support WebSockets.");let o=new WebSocket(e);return o.onopen=function(){a7.log.info("Connecting to the socket server at "+e)},o.onerror=function(){var t="Can't connect to the socket server at "+e;a7.log.error(t)},o.onmessage=function(e){if(n){var o;try{o=JSON.parse(e.data)}catch(t){return void a7.log.error("This doesn't look like valid JSON: ",e.data)}t(e,o)}else t(e)},window.addEventListener("close",function(){o.close()}),o}},getToken:function(){return e},invalidateToken:function(){s("")},getSessionTimer:function(){return t},init:function(t){var o=a7.model.get("a7").auth;(n=a7.model.get("a7").remote).sessionTimeout=o.sessionTimeout,n.useTokens&&sessionStorage.token&&""!==sessionStorage.token&&(e=sessionStorage.token),r("auth",{login:function(t){a7.log.trace("remote call: auth.login");var o,i={method:"POST",headers:{Authorization:"Basic "+a7.util.base64.encode64(t.username+":"+t.password)}};o=new Request(n.loginURL,i),fetch(o).then(function(t){var n=t.headers.get("X-Token");return void 0!==n&&null!==n&&(e=n,sessionStorage.token=n),t.json()}).then(function(e){if(e.success){var n=a7.model.get("user");Object.keys(e.user).map(function(t){n[t]=e.user[t]}),sessionStorage.user=JSON.stringify(n),a7.model.set("user",n),void 0!==t.success&&("function"==typeof t.success?t.success(e):a7.model.get("a7").router?a7.router.open(t.success,e):a7.events.publish(t.success,e))}else void 0!==t.failure&&("function"==typeof t.failure?t.failure(e):a7.model.get("a7").router?a7.router.open(t.failure,e):a7.events.publish(t.failure,e));void 0!==t.callback&&t.callback(e)})},logout:function(e){a7.log.trace("remote call: auth.logout");var t,o={method:"POST",headers:{Authorization:"Basic "+a7.util.base64.encode64(e.username+":"+e.password)}};t=new Request(n.logoutURL,o),fetch(t).then(function(e){return e.json()}).then(function(t){t.success?(a7.security.invalidateSession(),void 0!==e.success&&("function"==typeof e.success?e.success(t):a7.model.get("a7").router?a7.router.open(e.success,t):a7.events.publish(e.success,t))):void 0!==e.failure&&("function"==typeof e.failure?e.failure(t):a7.model.get("a7").router?a7.router.open(e.failure,t):a7.events.publish(e.failure,t)),void 0!==e.callback&&e.callback()})},refresh:function(e){a7.remote.fetch(n.refreshURL,{},!0).then(function(e){return e.json()}).then(function(t){void 0!==e.resolve&&e.resolve(t.success)})}}),Object.keys(t).forEach(function(e){r(e,t[e])})},fetch:function(i,r,c){var u,l;if(a7.log.info("fetch: "+i),c&&n.useTokens){var d=new Date,h=Math.abs(d-o);if(Math.floor(h/1e3/60)>n.sessionTimeout)return void a7.events.publish("auth.sessionTimeout");void 0!==e&&null!==e&&(void 0===r.headers?r.headers={"X-Token":e}:r.headers["X-Token"]=e),o=d}return u=new Request(i,r),(l=fetch(u)).then(function(e){if(c&&n.useTokens){var o=e.headers.get("X-Token");void 0!==o&&null!==o?(s(o),void 0!==t&&clearTimeout(t),t=setTimeout(a,n.sessionTimeout)):a7.events.publish("auth.sessionTimeout")}}),l},invoke:function(e,t){var n=e.split(".");if(!(n.length<2))return"function"==typeof i[n[0]][n[1]]?i[n[0]][n[1]](t):void 0;a7.log.error("No action specified. Valid actions are: "+Object.keys(i[n[0]]).toString())}}}(),a7.router=function(){"use strict";var e=/^[^/]+/,t=/^(:\w|\()/,n=/:\w|\(/,o=/^(?::(\w+))?(?:\(([^)]+)\))?/;function i(e){var t=this;this.root=this._createNode(),e&&e.forEach(function(e){return t.add.apply(t,e)})}var r=i.prototype;r._createNode=function(e){var t=void 0===e?{}:e;return{regex:t.regex,param:t.param,handler:t.handler,children:{string:{},regex:{}}}},r.add=function(e,t){return this._parseOptim(e,t,this.root),this},r._parse=function(n,i,r){if(t.test(n)){var a=n.match(o),s=r.children.regex[a[0]];s||(s=r.children.regex[a[0]]=this._createNode({regex:a[2]?new RegExp("^"+a[2]):e,param:a[1]})),a[0].length===n.length?s.handler=i:this._parseOptim(n.slice(a[0].length),i,s)}else{var c=n[0],u=r.children.string[c];u||(u=r.children.string[c]=this._createNode()),this._parse(n.slice(1),i,u)}},r._parseOptim=function(e,t,o){if(n.test(e))this._parse(e,t,o);else{var i=o.children.string[e];i?i.handler=t:o.children.string[e]=this._createNode({handler:t})}},r.find=function(e){return this._findOptim(e,this.root,{})},r._findOptim=function(e,t,n){var o=t.children.string[e];return o&&void 0!==o.handler?{handler:o.handler,params:n}:this._find(e,t,n)},r._find=function(e,t,n){var o=t.children.string[e[0]];if(o){var i=this._find(e.slice(1),o,n);if(i)return i}for(var r in t.children.regex){o=t.children.regex[r];var a=e.match(o.regex);if(a){if(a[0].length===e.length&&void 0!==o.handler)return o.param&&(n[o.param]=decodeURIComponent(a[0])),{handler:o.handler,params:n};var s=this._findOptim(e.slice(a[0].length),o,n);if(s)return o.param&&(n[o.param]=decodeURIComponent(a[0])),s}}return null};var a,s,c=function(e){return s.find(e)},u=function(e){let t=s.find(e);a.useEvents?a7.events.publish(t.handler,t.params):t.handler(t.params)};return{open:function(e,t={}){let n=c(e),o=n.handler;history.pushState(JSON.parse(JSON.stringify(t)),"",e);let i=Object.assign(t||{},n.params||{});a.useEvents&&"string"==typeof o?a7.events.publish(o,i):o(i)},add:function(e,t){s.add(e,t)},find:c,match:u,init:function(e,t){s=new i(t),(a=e).useEvents=!!a.useEvents,window.onpopstate=function(e){u(document.location.pathname+document.location.search)}}}}(),a7.security=function(){"use strict";let e=[];return{invalidateSession:function(){clearTimeout(a7.remote.getSessionTimer()),a7.remote.invalidateToken();var t=a7.components.Constructor(a7.components.User,e,!0);sessionStorage.user=JSON.stringify(t),a7.model.set("user",t)},isAuthenticated:function(e,t){if(a7.log.info("Checking authenticated state.. "),a7.model.get("a7").remote.useTokens){var n=a7.remote.getToken();void 0!==n&&null!==n&&n.length>0?void 0===a7.remote.getSessionTimer()?(a7.log.info("Refreshing user..."),a7.events.publish("auth.refresh",{resolve:e,reject:t})):e(!0):e(!1)}},init:function(t){a7.log.info("Security initializing..."),e=t.userArgs?t.userArgs:[];var n,o=a7.components.Constructor(a7.components.User,e,!0);sessionStorage.user&&""!==sessionStorage.user&&(n=JSON.parse(sessionStorage.user),Object.keys(n).map(function(e){o[e]=n[e]})),a7.model.set("user",o)}}}(),a7.ui=function(){"use strict";const e=["cached","error","abort","load","beforeunload"].concat(["online","offline"]).concat(["focus","blur"]).concat(["open","message","error","close"]).concat(["pagehide","pageshow","popstate"]).concat(["animationstart","animationend","animationiteration"]).concat(["transitionstart","transitioncancel","transitionend","transitionrun"]).concat(["reset","submit"]).concat(["beforeprint","afterprint"]).concat(["compositionstart","compositionupdate","compositionend"]).concat(["fullscreenchange","fullscreenerror","resize","scroll"]).concat(["cut","copy","paste"]).concat(["keydown","keypress","keyup"]).concat(["auxclick","click","contextmenu","dblclick","mousedown","mousenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","wheel"]).concat(["drag","dragend","dragstart","dragleave","dragover","drop"]).concat(["audioprocess","canplay","canplaythrough","complete","durationchange","emptied","ended","loadeddata","loadedmetadata","pause","play","playing","ratechange","seeked","seeking","stalled","suspend","timeupdate","columechange","waiting"]).concat(["loadend","loadstart","progress","timeout"]).concat(["change","storage"]).concat(["checking","downloading","noupdate","obsolete","updateready"]).concat(["broadcast","CheckBoxStateChange","hashchange","input","RadioStateChange","readystatechange","ValueChange"]).concat(["invalid","localized","show"]);var t=[],n={},o={},i=[],r=[],a=!1,s=[],c=function(e){return s[e]},u=function(e){a7.log.trace("Find children of "+e);let t=[],n=s[e];for(var o in n.children){let e=n.children[o].props.id;void 0!==c(e)&&(t.push(e),t.concat(u(e)))}return t},l=function(e){if(a)r.push(e);else if(a7.log.info("enqueue: "+e),i.length){let t=u(e);if(void 0===s[e].props.parentID)a7.log.trace("add to front of queue: "+e),i.unshift(e);else{let t=function(e){a7.log.trace("Find parents of "+e);let t=[],n=s[e];for(;void 0!==n.props.parentID;)t.unshift(n.props.parentID),n=s[n.props.parentID];return t}(e),n=void 0;t.length&&(n=t.find(function(e){return i.indexOf(e)>=0})),void 0===n&&(a7.log.trace("add to end of queue: "+e),i.push(e))}t.forEach(function(e){i.indexOf(e)>=0&&(a7.log.trace("remove child from queue: "+e),i.splice(i.indexOf(e),1))})}else a7.log.trace("add first view to queue: "+e),i.push(e),setTimeout(d,18)},d=function(){a7.log.trace("processing the queue"),a=!0,i.forEach(function(e){s[e].render()}),i=[],a=!1,r.forEach(function(e){l(e)}),r=[]};return{getEvents:function(){return t},selectors:o,getSelector:function(e){return o[e]},setSelector:function(e,t){o[e]=t},getNode:function(e){return document.querySelector(e)},register:function(e){switch(n.renderer){case"Handlebars":case"Mustache":case"templateLiterals":s[e.props.id]=e,e.fireEvent("registered")}},unregister:function(e){delete s[e]},getView:c,enqueueForRender:l,removeView:function(e){delete s[e]},views:s,init:function(o,i){switch(a7.log.info("Layout initializing..."),(n=a7.model.get("a7").ui).eventGroups?n.eventGroups:"standard"){case"extended":i("Extended events are not implemented yet.");case"standard":t=e;break;default:n.eventGroups.forEach(function(e){t=t.concat(e)})}o()}}}(),a7.util={split:function(e){return e.split(/,\s*/)},extractLast:function(e){return this.split(e).pop()},base64:{keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){if(!String(e).length)return!1;var t,n,o,i,r,a,s,c="",u=0;do{i=(t=e.charCodeAt(u++))>>2,r=(3&t)<<4|(n=e.charCodeAt(u++))>>4,a=(15&n)<<2|(o=e.charCodeAt(u++))>>6,s=63&o,isNaN(n)?a=s=64:isNaN(o)&&(s=64),c=c+this.keyStr.charAt(i)+this.keyStr.charAt(r)+this.keyStr.charAt(a)+this.keyStr.charAt(s)}while(u<e.length);return c},decode64:function(e){if(!e)return!1;var t,n,o,i,r,a,s="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.keyStr.indexOf(e.charAt(c++))<<2|(i=this.keyStr.indexOf(e.charAt(c++)))>>4,n=(15&i)<<4|(r=this.keyStr.indexOf(e.charAt(c++)))>>2,o=(3&r)<<6|(a=this.keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!==r&&(s+=String.fromCharCode(n)),64!==a&&(s+=String.fromCharCode(o))}while(c<e.length);return s}},leadingZero:function(e){return e<10?"0"+e:e},dynamicSort:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,o){return(n[e]<o[e]?-1:n[e]>o[e]?1:0)*t}},yesNo:function(e){return parseInt(e,10)<1?"No":"Yes"},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},id:function(){return((100*Math.random()).toString()+(100*Math.random()).toString()).replace(/\./g,"")},tryCatch:function(e,t,n){var o={value:null};try{return e.apply(t,n)}catch(e){return o.value=e,o}},getNumberValue:function(e){return isNaN(Number(e))?Number(e.substring(0,e.length-2)):e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}};
//# sourceMappingURL=a7.min.js.map